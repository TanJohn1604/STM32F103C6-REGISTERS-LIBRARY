/*
 * systick_deay.c
 *
 *  Created on: Jun 11, 2022
 *      Author: ad
 */


#include "systick_delay.h"

void init_systick_delay(){
//reset thanh ghi
SysTick->CTRL =0;
//cai dat gia tri đích cho bộ đếm
SysTick->LOAD=0x00FFFFFF;
//cài đặt giá trị cho thanh ghi đếm
SysTick->VAL=0;
//bật thanh ghi và lấy clock từ AHB
SysTick->CTRL=5;
}

void delayus(){
	SysTick->LOAD=8000000-1;
	SysTick->VAL=0;
	while( (SysTick->CTRL) && SysTick_CTRL_COUNTFLAG_Msk );
}

void delayms(uint32_t ms){
	for(;ms>0;ms--){
		delayus();
	}
}
