/*
 * usart.c
 *
 *  Created on: 12 thg 6, 2022
 *      Author: ad
 */

#include "usart.h"

void init_usart(uint8_t usartx,uint16_t baudrate);

uint32_t usartdiv_baudrate(uint32_t baudrate){

unsigned long div = 36000000UL;
unsigned long dec;
unsigned long final;
double frac = 36000000.00;
double frac2 = 1.00;


div = div / (BR*16);
frac = 16*((frac / (BR*16))-div);
dec = frac;
frac2 = 100*(frac-dec);
if(frac2>50)
{
	dec ++;
	if(dec == 16)
	{
		dec = 0;
		div ++;
	}
}

final = (div<<4);
final += dec;

return final;
}
